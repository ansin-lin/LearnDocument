# vi / vim 编辑器使用简介

> 本章目标：  
>
> - 理解 vi / vim 是什么、为什么在 Linux 中必须掌握  
> - 掌握 vi / vim 的基本模式与核心操作  
> - 能完成配置文件与脚本的基本编辑  
> - 避免新手在服务器上“退不出来”的常见问题

---

## 1. vi / vim 是什么？

`vi` / `vim` 是 Linux 中最常见的 **终端文本编辑器**。

- `vi`：Unix 时代的标准编辑器  
- `vim`：Vi Improved（增强版，更常用）

📌 在服务器环境中：  
> **没有图形界面时，vi/vim 几乎是唯一可用的编辑器**

---

## 2. 为什么一定要会 vi / vim？

- 编辑配置文件（nginx.conf、crontab、sudoers）
- 修改 Shell 脚本（.sh 文件）
- SSH 远程服务器操作
- Linux 系统默认内置

---

## 3. 打开与创建文件

```bash
vi file.txt
vim file.txt
```

- 文件存在：打开编辑  
- 文件不存在：新建文件

---

## 4. vi / vim 的三种模式（重点）

### 4.1 普通模式（Normal）

- 打开文件后的默认模式
- 不能直接输入文字
- 用于移动光标、删除、复制

---

### 4.2 插入模式（Insert）

- 用于输入和修改文本

进入插入模式的常用按键：

- `i`：在光标前插入
- `a`：在光标后插入
- `o`：在下一行插入

---

### 4.3 命令模式（Command）

- 用于保存、退出、查找、替换
- 在普通模式下按 `:` 进入

📌 **ESC 是万能键**：  
> 不知道在哪个模式，先按 `ESC`

---

## 5. 保存与退出（必会）

| 操作 | 命令 |
| --- | --- |
| 保存 | `:w` |
| 退出 | `:q` |
| 保存并退出 | `:wq` |
| 强制退出不保存 | `:q!` |

📌 教学口诀：  
> **ESC → :wq → 回车**

---

## 6. 常用编辑操作

### 6.1 删除

- `dd`：删除当前行
- `dw`：删除一个单词
- `x`：删除当前字符

---

### 6.2 复制与粘贴

- `yy`：复制当前行
- `p`：粘贴到下一行

---

### 6.3 撤销与重做

- `u`：撤销
- `Ctrl + r`：重做

---

## 7. 查找与替换

### 7.1 查找

```text
/关键词
```

- `n`：下一个
- `N`：上一个

---

### 7.2 替换

```text
:%s/旧内容/新内容/g
```

---

## 8. 常见使用场景

### 编辑 crontab

```bash
crontab -e
```

### 编辑系统配置文件

```bash
sudo vim /etc/nginx/nginx.conf
```

---

## 9. 新手常见问题与提醒

- 打不开插入模式 → 先按 `ESC` 再按 `i`
- 不知道怎么退出 → `ESC` 后输入 `:q!`
- 修改后忘记保存 → 使用 `:w` 或 `:wq`

---

## 10. 本章小结

- vi / vim 是 Linux 服务器必备编辑器  
- 记住三种模式即可解决大多数问题  
- 会打开、会输入、会保存退出 = 已经合格

---

## 11. 教学练习

1. 使用 vim 新建一个文件并输入内容  
2. 尝试删除、复制、粘贴一行  
3. 保存并退出文件

# ç¬¬å››é˜¶æ®µï¼šCloudFrontï¼ˆCDNï¼‰ä¸Žå‰ç«¯å…¨çƒåŠ é€Ÿ

> æœ¬ç« å­¦ä¹ ç›®æ ‡ï¼š
>
> - ç†è§£ä¸ºä»€ä¹ˆæœ‰äº† S3 è¿˜éœ€è¦ CloudFront  
> - ç†è§£ CDN çš„åŸºæœ¬å·¥ä½œåŽŸç†  
> - æŽŒæ¡ CloudFront ä¸Ž S3 çš„å…³ç³»  
> - èƒ½ä¸ºå‰ç«¯é¡¹ç›®é…ç½® CloudFront åŠ é€Ÿ  
> - å»ºç«‹â€œæ€§èƒ½ + æˆæœ¬ + æž¶æž„â€çš„æ•´ä½“è®¤çŸ¥  

---

## 1. ä¸ºä»€ä¹ˆæœ‰äº† S3 è¿˜éœ€è¦ CloudFrontï¼Ÿ

åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼š

- å°†å‰ç«¯é¡µé¢éƒ¨ç½²åˆ° S3
- é€šè¿‡æµè§ˆå™¨ç›´æŽ¥è®¿é—® S3 é™æ€ç½‘ç«™

åŠŸèƒ½ä¸Šå·²ç»æ²¡æœ‰é—®é¢˜ï¼Œä½†åœ¨çœŸå®žä½¿ç”¨ä¸­ä»ç„¶å­˜åœ¨æ˜Žæ˜¾ä¸è¶³ã€‚

---

### 1.1 S3 é™æ€ç½‘ç«™çš„å¤©ç„¶å±€é™

å‡è®¾ä½ çš„ S3 Bucket ä½äºŽ **ä¸œäº¬ï¼ˆap-northeast-1ï¼‰**ï¼š

- æ—¥æœ¬ç”¨æˆ·è®¿é—® â†’ é€Ÿåº¦å¿«  
- æ¬§æ´² / ç¾Žå›½ç”¨æˆ·è®¿é—® â†’ å»¶è¿Ÿæ˜Žæ˜¾å‡é«˜  

åŽŸå› æ˜¯ï¼š

> **S3 æ˜¯åŒºåŸŸçº§æœåŠ¡ï¼Œè¯·æ±‚éœ€è¦è·¨æ´²è®¿é—®ã€‚**

---

### 1.2 ä¸€ä¸ªå¿…é¡»å»ºç«‹çš„è®¤çŸ¥

> **S3 è§£å†³çš„æ˜¯â€œå­˜åœ¨å“ªé‡Œâ€ï¼Œ  
> CloudFront è§£å†³çš„æ˜¯â€œè®¿é—®å¿«ä¸å¿«â€ã€‚**

---

## 2. ä»€ä¹ˆæ˜¯ CloudFrontï¼Ÿ

CloudFront æ˜¯ AWS æä¾›çš„ **CDNï¼ˆContent Delivery Networkï¼‰æœåŠ¡**ã€‚

å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š

> **ä¸€ä¸ªåˆ†å¸ƒåœ¨å…¨çƒå„åœ°çš„é«˜é€Ÿç¼“å­˜ç½‘ç»œã€‚**

å®ƒçš„ç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š

- è®©ç”¨æˆ·ä»Ž**æœ€è¿‘çš„èŠ‚ç‚¹**è®¿é—®å†…å®¹

---

## 3. CDN çš„å·¥ä½œåŽŸç†ï¼ˆæ–°æ‰‹ç‰ˆï¼‰

CloudFront çš„å…¸åž‹è®¿é—®æµç¨‹å¦‚ä¸‹ï¼š

```text
ç”¨æˆ·
 â†“
å°±è¿‘ Edge Locationï¼ˆè¾¹ç¼˜èŠ‚ç‚¹ï¼‰
 â†“ï¼ˆæ— ç¼“å­˜æ—¶ï¼‰
S3ï¼ˆæºç«™ï¼‰
```

### è®¿é—®è¿‡ç¨‹è¯´æ˜Ž

- ç¬¬ä¸€æ¬¡è®¿é—®ï¼š
    - Edge æ²¡æœ‰ç¼“å­˜
    - CloudFront å‘ S3 æ‹‰å–èµ„æº
    - åŒæ—¶ç¼“å­˜åœ¨ Edge
- åŽç»­è®¿é—®ï¼š
    - ç›´æŽ¥ä»Ž Edge è¿”å›ž
    - ä¸å†è®¿é—® S3

---

## 4. Edge Location æ˜¯ä»€ä¹ˆï¼Ÿ

Edge Locationï¼ˆè¾¹ç¼˜èŠ‚ç‚¹ï¼‰æ˜¯ CloudFront çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ï¼š

- åˆ†å¸ƒåœ¨å…¨çƒå„å¤§åŸŽå¸‚
- æ•°é‡è¿œå¤šäºŽ AWS Region
- åªè´Ÿè´£ç¼“å­˜ä¸Žåˆ†å‘å†…å®¹

### Region ä¸Ž Edge Location çš„åŒºåˆ«

| å¯¹æ¯”é¡¹ | Region | Edge Location |
| ------ | -------- | --------------- |
| æ˜¯å¦è¿è¡Œ EC2 | æ˜¯ | å¦ |
| æ˜¯å¦å­˜åŽŸå§‹æ•°æ® | æ˜¯ | å¦ |
| æ˜¯å¦é¢å‘ç”¨æˆ· | é—´æŽ¥ | ç›´æŽ¥ |
| ä¸»è¦ä½œç”¨ | è®¡ç®— / å­˜å‚¨ | å†…å®¹åŠ é€Ÿ |

---

## 5. CloudFront ä¸Ž S3 çš„å…³ç³»

CloudFront æœ¬èº« **ä¸ä¿å­˜åŽŸå§‹æ•°æ®**ï¼Œå®ƒä¾èµ–ä¸€ä¸ªæºç«™ï¼ˆOriginï¼‰ã€‚

åœ¨å‰ç«¯æž¶æž„ä¸­ï¼š

```text
CloudFront â†’ S3
```

- S3ï¼šæºç«™ï¼ˆå­˜æ”¾åŽŸå§‹æ–‡ä»¶ï¼‰
- CloudFrontï¼šåŠ é€Ÿå±‚ï¼ˆç¼“å­˜ + åˆ†å‘ï¼‰

---

## 6. CloudFront èƒ½è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ

### 6.1 å…¨çƒè®¿é—®åŠ é€Ÿ

- ç”¨æˆ·è®¿é—®æœ€è¿‘çš„ Edge
- å»¶è¿Ÿå¤§å¹…é™ä½Ž

---

### 6.2 é™ä½Ž S3 è®¿é—®åŽ‹åŠ›ä¸Žæˆæœ¬

- ç¼“å­˜å‘½ä¸­åŽä¸å†è®¿é—® S3
- å‡å°‘è¯·æ±‚æ¬¡æ•°ä¸Žæµé‡è´¹ç”¨

---

### 6.3 HTTPS ä¸ŽåŸŸåæ”¯æŒ

- é»˜è®¤æ”¯æŒ HTTPS
- å¯ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼ˆè¿›é˜¶å†…å®¹ï¼‰

---

## 7. å®žæˆ˜ï¼šä¸º S3 å‰ç«¯é¡¹ç›®é…ç½® CloudFront

> å®žæˆ˜ç›®æ ‡ï¼š  
> **åœ¨ä¸ä¿®æ”¹å‰ç«¯ä»£ç çš„å‰æä¸‹ï¼Œå®žçŽ°å…¨çƒåŠ é€Ÿè®¿é—®ã€‚**

---

### 7.1 åˆ›å»º CloudFront Distribution

æ“ä½œæ­¥éª¤ï¼š

1. AWS æŽ§åˆ¶å° â†’ CloudFront
2. ç‚¹å‡» **Create Distribution**
3. Origin domainï¼šé€‰æ‹©å¯¹åº”çš„ S3 Bucket
4. Viewer protocol policyï¼šRedirect HTTP to HTTPS
5. å…¶ä½™é…ç½®ä¿æŒé»˜è®¤
6. åˆ›å»º Distribution

---

### 7.2 ç­‰å¾…éƒ¨ç½²å®Œæˆ

- çŠ¶æ€ï¼šDeploying â†’ Enabled
- é€šå¸¸éœ€è¦å‡ åˆ†é’Ÿ

---

### 7.3 ä½¿ç”¨ CloudFront åŸŸåè®¿é—®

CloudFront ä¼šç”Ÿæˆä¸€ä¸ªåŸŸåï¼Œä¾‹å¦‚ï¼š

```text
https://d123456abcdef.cloudfront.net
```

é€šè¿‡è¯¥åœ°å€è®¿é—®å‰ç«¯é¡µé¢ã€‚

---

## 8. CloudFront ä¸Ž S3 Website Endpoint å¯¹æ¯”

| é¡¹ç›® | S3 Website Endpoint | CloudFront |
| ---- | --------------------- | ----------- |
| å…¨çƒåŠ é€Ÿ | âŒ | âœ… |
| HTTPS | âŒ | âœ… |
| ç¼“å­˜æœºåˆ¶ | âŒ | âœ… |
| è‡ªå®šä¹‰åŸŸå | âŒ | âœ… |

ðŸ“Œ **ç”Ÿäº§çŽ¯å¢ƒå‡ ä¹Žéƒ½ä¼šä½¿ç”¨ CloudFrontã€‚**

---

## 9. CloudFront ç¼“å­˜åŸºç¡€è®¤çŸ¥

### 9.1 ä¸ºä»€ä¹ˆæ›´æ–°æ–‡ä»¶åŽæ²¡æœ‰ç«‹åˆ»ç”Ÿæ•ˆï¼Ÿ

åŽŸå› ï¼š

- Edge èŠ‚ç‚¹ä»åœ¨ä½¿ç”¨æ—§ç¼“å­˜

è§£å†³æ€è·¯ï¼ˆæ¦‚å¿µçº§ï¼‰ï¼š

- ç­‰ç¼“å­˜è‡ªåŠ¨è¿‡æœŸ
- æˆ–è¿›è¡Œç¼“å­˜åˆ·æ–°ï¼ˆInvalidationï¼‰

---

## 10. å½“å‰å®Œæ•´å‰ç«¯æž¶æž„æ€»ç»“

```text
æµè§ˆå™¨
 â†“
CloudFrontï¼ˆCDNï¼‰
 â†“
S3ï¼ˆå‰ç«¯èµ„æºï¼‰
```

åŽç«¯ä»ç„¶æ˜¯ï¼š

```text
æµè§ˆå™¨
 â†“
Nginx
 â†“
Spring Bootï¼ˆEC2ï¼‰
```

è¿™æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ **å‰åŽç«¯åˆ†ç¦»äº‘æž¶æž„**ã€‚

---

## 11. æœ¬ç« æ€»ç»“

- S3 è´Ÿè´£å­˜å‚¨
- CloudFront è´Ÿè´£åŠ é€Ÿ
- å‰ç«¯ä¸å†ä¾èµ–æœåŠ¡å™¨
- æ€§èƒ½ä¸Žæˆæœ¬åŒæ—¶ä¼˜åŒ–

---

## ç†è®ºè¡¥å……ï¼šä¸ºä»€ä¹ˆå‰ç«¯é¡µé¢ä¸éƒ¨ç½²åœ¨ EC2ï¼Œè€Œéƒ¨ç½²åœ¨ S3ï¼Ÿ

åœ¨å­¦ä¹  AWS çš„è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šåˆå­¦è€…éƒ½ä¼šæœ‰ä¸€ä¸ªéžå¸¸è‡ªç„¶çš„ç–‘é—®ï¼š

> â€œæ—¢ç„¶æˆ‘å·²ç»æœ‰ EC2 + Nginx äº†ï¼Œ  
> ä¸ºä»€ä¹ˆä¸ç›´æŽ¥æŠŠå‰ç«¯é¡µé¢æ”¾åœ¨ EC2 ä¸Šï¼Œè€Œæ˜¯è¦æ”¾åˆ° S3 ä¸­ï¼Ÿâ€

è¿™æ˜¯ä¸€ä¸ª**éžå¸¸å…³é”®çš„é—®é¢˜**ï¼Œç†è§£å®ƒï¼Œæ„å‘³ç€ä½ çœŸæ­£å¼€å§‹ç†è§£**äº‘æž¶æž„çš„è®¾è®¡æ€æƒ³**ã€‚

---

### ä¸€ã€EC2 çš„å®šä½ï¼šè®¡ç®—ï¼Œè€Œä¸æ˜¯æ–‡ä»¶åˆ†å‘

EC2ï¼ˆElastic Compute Cloudï¼‰çš„æ ¸å¿ƒä»·å€¼åœ¨äºŽï¼š

- è¿è¡Œç¨‹åº
- æ‰§è¡Œä¸šåŠ¡é€»è¾‘
- å¤„ç† API è¯·æ±‚
- è¿›è¡Œè®¡ç®—ä»»åŠ¡

ä¹Ÿå°±æ˜¯è¯´ï¼š

> **EC2 æ˜¯ä¸ºâ€œè®¡ç®—â€è€Œè®¾è®¡çš„æœåŠ¡ã€‚**

è™½ç„¶ EC2 ä¹Ÿå¯ä»¥é€šè¿‡ Nginx è¿”å›ž HTML é¡µé¢ï¼Œä½†è¿™å¹¶ä¸æ˜¯å®ƒæœ€æ“…é•¿ã€ä¹Ÿä¸æ˜¯æœ€åˆç†çš„ç”¨é€”ã€‚

---

### äºŒã€å‰ç«¯é¡µé¢çš„æœ¬è´¨ï¼šé™æ€æ–‡ä»¶åˆ†å‘é—®é¢˜

å‰ç«¯é¡¹ç›®ï¼ˆHTML / Vue / Reactï¼‰åœ¨æž„å»ºå®ŒæˆåŽï¼Œæœ¬è´¨ä¸Šåªæ˜¯ä¸€äº›**é™æ€æ–‡ä»¶**ï¼š

- HTML
- CSS
- JavaScript
- å›¾ç‰‡ã€å­—ä½“ç­‰èµ„æº

è¿™äº›æ–‡ä»¶çš„ç‰¹ç‚¹æ˜¯ï¼š

- ä¸éœ€è¦è®¡ç®—
- ä¸ä¾èµ– CPU
- ä¸éœ€è¦å†…å­˜
- åªéœ€è¦è¢«**ç¨³å®šã€å¿«é€Ÿåœ°ä¸‹è½½**

å› æ­¤ï¼Œå‰ç«¯é¡µé¢æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªï¼š

> **â€œæ–‡ä»¶å­˜å‚¨ + æ–‡ä»¶åˆ†å‘â€çš„é—®é¢˜ï¼Œè€Œä¸æ˜¯è®¡ç®—é—®é¢˜ã€‚**

---

### ä¸‰ã€æŠŠå‰ç«¯é¡µé¢æ”¾åœ¨ EC2 ä¸Šçš„ç¼ºç‚¹

å¦‚æžœå°†å‰ç«¯é¡µé¢éƒ¨ç½²åœ¨ EC2 ä¸Šï¼Œé€šå¸¸ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š

#### 1ï¸âƒ£ èµ„æºæµªè´¹

- EC2 çš„ CPU / å†…å­˜è¢«ç”¨äºŽâ€œå‘æ–‡ä»¶â€
- é«˜ä»·å€¼çš„è®¡ç®—èµ„æºè¢«ä½Žä»·å€¼ä»»åŠ¡å ç”¨

#### 2ï¸âƒ£ æ‰©å±•æ€§å·®

- ç”¨æˆ·è®¿é—®é‡ä¸Šå‡ â†’ éœ€è¦å¢žåŠ  EC2
- å¢žåŠ  EC2 â†’ éœ€è¦åŒæ­¥å‰ç«¯æ–‡ä»¶
- è¿ç»´å¤æ‚åº¦å’Œæˆæœ¬è¿…é€Ÿä¸Šå‡

#### 3ï¸âƒ£ ç¨³å®šæ€§å—å½±å“

- EC2 å®•æœºæˆ–é‡å¯ â†’ å‰ç«¯é¡µé¢ä¸å¯è®¿é—®
- åŽç«¯æœåŠ¡å¼‚å¸¸ â†’ å‰ç«¯ä¹Ÿè¢«è¿žå¸¦å½±å“

ðŸ“Œ **å‰ç«¯å’ŒåŽç«¯è¢«å¼ºè¡Œç»‘å®šåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œç¼ºä¹è§£è€¦ã€‚**

---

### å››ã€S3 çš„å®šä½ï¼šä¸ºé™æ€èµ„æºè€Œç”Ÿ

S3ï¼ˆSimple Storage Serviceï¼‰æ­£æ˜¯ä¸ºè¿™ç§åœºæ™¯è®¾è®¡çš„æœåŠ¡ã€‚

S3 çš„æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š

- é«˜å¯ç”¨ï¼ˆå‡ ä¹Žä¸ä¼šå®•æœºï¼‰
- æžé«˜çš„æ•°æ®æŒä¹…æ€§
- æ”¯æŒè¶…é«˜å¹¶å‘è®¿é—®
- ä¸éœ€è¦ç®¡ç†æœåŠ¡å™¨
- æˆæœ¬ä½Žï¼ŒæŒ‰ä½¿ç”¨é‡ä»˜è´¹

å¯ä»¥è¿™æ ·ç†è§£ï¼š

> **S3 æ˜¯ä¸€ä¸ªâ€œä¸“é—¨ç”¨æ¥å­˜å’Œå‘æ–‡ä»¶çš„äº‘æœåŠ¡â€ã€‚**

---

### äº”ã€S3 + CloudFront æ˜¯å‰ç«¯éƒ¨ç½²çš„æœ€ä½³å®žè·µ

åœ¨çœŸå®žçš„ç”Ÿäº§çŽ¯å¢ƒä¸­ï¼Œå‰ç«¯å‡ ä¹Žéƒ½ä¼šé‡‡ç”¨ä»¥ä¸‹æž¶æž„ï¼š

```text
æµè§ˆå™¨
  â†“
CloudFrontï¼ˆCDNï¼‰
  â†“
S3ï¼ˆé™æ€æ–‡ä»¶ï¼‰
```

è¿™ç§æž¶æž„çš„å¥½å¤„åŒ…æ‹¬ï¼š

- ç”¨æˆ·è®¿é—®å°±è¿‘çš„ CDN èŠ‚ç‚¹ï¼Œé€Ÿåº¦æ›´å¿«
- é™æ€èµ„æºè¢«ç¼“å­˜ï¼Œå‡å°‘æºç«™åŽ‹åŠ›
- å‰ç«¯è®¿é—®å‡ ä¹Žä¸æ¶ˆè€— EC2 èµ„æº
- ç³»ç»Ÿæ•´ä½“ç¨³å®šæ€§æ›´é«˜

---

### å…­ã€å‰åŽç«¯è§£è€¦æ˜¯çŽ°ä»£ Web æž¶æž„çš„åŸºç¡€

å½“ä½ å°†å‰ç«¯éƒ¨ç½²åœ¨ S3ï¼Œå°†åŽç«¯éƒ¨ç½²åœ¨ EC2 åŽï¼Œç³»ç»Ÿä¼šè‡ªç„¶å½¢æˆä¸‰å±‚ç»“æž„ï¼š

```text
å‰ç«¯ï¼šS3 + CloudFront
åŽç«¯ï¼šEC2 + Nginx + Spring Boot
æ•°æ®åº“ï¼šRDS
```

è¿™ç§ç»“æž„å¸¦æ¥çš„å¥½å¤„æ˜¯ï¼š

- å‰ç«¯å’ŒåŽç«¯å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹å‡çº§
- å‰ç«¯è®¿é—®é‡å¢žåŠ ä¸ä¼šç›´æŽ¥æ‹–åž®åŽç«¯
- ç³»ç»Ÿæ›´å®‰å…¨ã€æ›´ç¨³å®š
- è¿ç»´æˆæœ¬æ›´ä½Ž

---

### ä¸ƒã€ä¸€ä¸ªç›´è§‚çš„ç±»æ¯”ï¼ˆå¸®åŠ©ç†è§£ï¼‰

å¯ä»¥è¿™æ ·ç±»æ¯”ï¼š

> **EC2 åƒæ˜¯åŽ¨æˆ¿é‡Œçš„åŽ¨å¸ˆ**  
> **S3 åƒæ˜¯è‡ªåŠ©å–é¤æŸœ**

- åŽ¨å¸ˆï¼ˆEC2ï¼‰åº”è¯¥ä¸“å¿ƒåšèœï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
- é¡¾å®¢ï¼ˆæµè§ˆå™¨ï¼‰ä»Žå–é¤æŸœï¼ˆS3ï¼‰ç›´æŽ¥å–é¤
- æ²¡å¿…è¦è®©åŽ¨å¸ˆäº²è‡ªç«¯æ¯ä¸€ä»½é¤ç‚¹

---

### å…«ã€å°ç»“ï¼ˆéžå¸¸é€‚åˆç« èŠ‚æ”¶å°¾ï¼‰

> å‰ç«¯é¡µé¢æœ¬è´¨ä¸Šæ˜¯é™æ€æ–‡ä»¶åˆ†å‘é—®é¢˜ï¼Œè€Œ EC2 çš„æ ¸å¿ƒä»·å€¼åœ¨äºŽè®¡ç®—å’Œä¸šåŠ¡å¤„ç†ã€‚  
> å°†å‰ç«¯é¡µé¢éƒ¨ç½²åœ¨ S3ï¼Œå¯ä»¥èŽ·å¾—æ›´é«˜çš„ç¨³å®šæ€§ã€æ›´ä½Žçš„æˆæœ¬å’Œæ›´å¥½çš„æ‰©å±•æ€§ã€‚  
> å› æ­¤ï¼Œåœ¨çŽ°ä»£äº‘æž¶æž„ä¸­ï¼Œå‰ç«¯é€šå¸¸éƒ¨ç½²åœ¨ S3ï¼Œè€ŒåŽç«¯æœåŠ¡è¿è¡Œåœ¨ EC2 ä¸Šï¼Œå®žçŽ°çœŸæ­£çš„å‰åŽç«¯è§£è€¦ã€‚

---

> ä¸‹ä¸€é˜¶æ®µï¼šRDSï¼ˆæ•°æ®åº“æœåŠ¡ï¼‰  
> æž„å»ºå®Œæ•´çš„ä¸‰å±‚äº‘æž¶æž„ã€‚
